/* ===== rankings.css =====
   Full stylesheet for the Power Rankings Reveal.
   Replace the inline <style> in rankings.html with:
   <link rel="stylesheet" href="./rankings.css" />
*/

/* ===== Theme variables and base ===== */
:root{
  --accent:#16a34a; --accent-2:#22c55e; --bg:#07120a;
  --panel:#0d1220; --panel-2:#0f1426; --text:#eef6ff; --muted:#b8d4c2;
  --glass: rgba(255,255,255,0.04);
  --border: rgba(34,197,94,.25);
  --shadow: 0 10px 28px rgba(0,0,0,.35);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#05120a);color:var(--text);-webkit-font-smoothing:antialiased}

/* ===== Animated ambient background (subtle) ===== */
.ambient {
  position:fixed;inset:0;z-index:0;pointer-events:none;
  background: radial-gradient(circle at 10% 20%, rgba(34,197,94,0.04), transparent 8%),
              radial-gradient(circle at 90% 80%, rgba(34,197,94,0.03), transparent 8%);
  mix-blend-mode:overlay;opacity:0.95;filter:blur(4px);
}

/* ===== Reveal container ===== */
.reveal-wrap{
  position:relative;z-index:10;
  width:100%;max-width:1100px;margin-inline:auto;
  background:linear-gradient(180deg, rgba(13,18,32,0.96), rgba(8,12,20,0.995));
  border-radius:16px;padding:18px;border:1px solid rgba(34,197,94,0.08);
  display:flex;flex-direction:column;height:calc(100vh - 40px);min-height:560px;box-shadow:var(--shadow);
  overflow:hidden;
}

/* header */
.reveal-header{display:flex;align-items:center;gap:12px;padding-bottom:8px;z-index:2}
.reveal-title{font-size:18px;font-weight:900;color:var(--accent-2)}
.reveal-sub{color:var(--muted);font-size:12px}

/* slide area */
main#slides{flex:1;display:block;position:relative;overflow:hidden}
.slide{
  position:absolute;
  inset:60px 18px 92px 18px;
  display:flex;align-items:center;justify-content:center;padding:18px;
  overflow:auto;border-radius:12px;opacity:0;transform:translateY(8px) scale(.995);
  transition:opacity .36s ease,transform .36s ease;backdrop-filter:blur(6px);
  z-index:1;
}
.slide.active{opacity:1;transform:none;z-index:10}
.slide .content{width:100%;max-width:980px}

/* Intro */
.intro{flex-direction:column;text-align:center;color:var(--text)}
.intro .hero{width:100%;max-width:760px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.04);box-shadow:0 8px 28px rgba(0,0,0,.4)}
.intro .hero img{width:100%;height:195px;object-fit:cover;display:block}
.intro h1{font-size:34px;margin:14px 0 6px}
.intro p{max-width:760px;color:var(--muted);margin-bottom:12px}
.start-btn{display:inline-block;padding:12px 20px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#062210;font-weight:900;border:1px solid rgba(255,255,255,.06);cursor:pointer}
.small-btn{background:transparent;border:1px solid var(--border);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}

/* podium */
.podium-wrap{display:flex;gap:18px;align-items:end;justify-content:center}
.pod{width:220px;text-align:center;padding:12px;border-radius:12px;color:#07120a;background:linear-gradient(180deg,#ffd966,#f5c000)}
.pod .medal{font-size:44px}
.pod.first{transform:translateY(-18px)}
.pod.second{background:linear-gradient(180deg,#c0cbd8,#9fb0c8)}
.pod.third{background:linear-gradient(180deg,#d1b9a6,#b38a6f)}

/* ranking card layout (desktop default) */
.rank-card{display:grid;grid-template-columns:320px 1fr;gap:18px;align-items:center;width:100%}
.rank-photo{width:300px;height:360px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.04);display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#0b1a10,#061008)}
.rank-photo img{width:100%;height:100%;object-fit:cover;object-position:50% 18%}
.rank-body{background:linear-gradient(180deg,var(--panel),var(--panel-2));padding:20px;border-radius:12px;border:1px solid var(--border);min-height:320px;display:flex;flex-direction:column}
.rank-top{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
.team-name{font-size:26px;font-weight:900}
.manager{font-size:13px;color:var(--muted);margin-top:6px}
.rank-badge{font-size:36px;font-weight:900;color:var(--accent-2);background:rgba(0,0,0,.12);padding:8px 14px;border-radius:12px}
.meta-row{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.meta{background:rgba(255,255,255,.03);padding:8px 10px;border-radius:10px;font-weight:800;font-size:13px}
.summary{margin-top:14px;color:#d6efe0;line-height:1.45;flex:1}
.projected{margin-top:12px;font-weight:800;margin-right:3px}

/* controls bar */
.controls{display:flex;align-items:center;gap:12px;padding:12px 6px;border-top:1px dashed rgba(255,255,255,.02);z-index:12}
.progress{height:8px;background:rgba(255,255,255,.04);border-radius:999px;overflow:hidden;flex:1;margin:0 10px}
.progress>i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}

/* small helpers */
.logo-cell img{width:36px;height:36px;border-radius:6px;object-fit:cover}

/* ===== MOBILE-ONLY: compact slide, icon logos right of name, smaller text, no vertical scrolling =====
   Targets screens <= 880px (only mobile changes)
*/
@media (max-width:880px){

  /* make whole reveal smaller so content fits without scrolling up/down */
  .reveal-wrap{
    padding:10px;border-radius:8px;height:calc(100vh - 20px);min-height:0;max-width:980px;
  }

  /* shrink slide inset to use more vertical space and remove inner scroll */
  .slide{inset:36px 10px 80px 10px;padding:10px;border-radius:10px;overflow:hidden}
  .slide .content{max-width:100%;width:100%}

  /* make the rank card more compact and single-row friendly */
  .rank-card{display:flex;flex-direction:column;gap:10px}
  .rank-top{display:flex;align-items:center;gap:8px}

  /* NEW: header layout — left: rank badge, center: team name + manager, right: small logo icon */
  .rank-header{
    display:flex;align-items:center;gap:10px;width:100%;
  }
  .rank-badge{font-size:26px;padding:6px 10px}
  .rank-header .title-wrap{flex:1;min-width:0}
  .title-wrap .team-name{font-size:16px;font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .title-wrap .manager{font-size:11px;margin-top:4px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  /* icon at right of name */
  .team-logo-icon{width:42px;height:42px;flex:0 0 42px;border-radius:10px;overflow:hidden;display:inline-block;border:1px solid rgba(255,255,255,.04)}
  .team-logo-icon img{width:100%;height:100%;object-fit:cover;display:block}

  /* make images icon-sized (not dominating) */
  .rank-photo{width:56px;height:56px;min-width:56px;border-radius:8px;overflow:hidden;background:linear-gradient(180deg,#08110a,#061008)}
  .rank-photo img{width:56px;height:56px;object-fit:cover;object-position:50% 20%}

  /* enlarge text boxes slightly so multi-line text fits — no clipping */
  .rank-body{padding:12px;border-radius:10px;min-height:0}
  .summary{font-size:12px;max-height:88px;overflow:hidden;line-height:1.35}
  .projected{font-size:12px}

  /* meta chips smaller */
  .meta{font-size:11px;padding:6px 8px}

  /* keep stats row on single line where possible */
  .meta-row{gap:8px;flex-wrap:nowrap;overflow:hidden}
  .meta-row .meta{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

  /* controls smaller and pinned */
  .controls{padding:8px 6px;gap:8px}
  .small-btn{padding:8px 10px;font-size:13px}
  .start-btn{padding:10px 16px;font-size:14px}

  /* podium shrink */
  .pod{width:120px;padding:8px}
  .pod .medal{font-size:34px}

  /* progress smaller */
  .progress{height:6px}

  /* ensure no accidental horizontal overflow */
  img,svg{max-width:100%;height:auto}

  /* micro animation to add energy */
  .pod .medal{transition:transform .28s ease}
  .pod:hover .medal{transform:translateY(-6px) scale(1.06)}
  .start-btn{transition:transform .16s ease, box-shadow .18s ease}
  .start-btn:active{transform:translateY(1px)}
}

/* ===== Very small phones — squeeze more text ===== */
@media (max-width:420px){
  .title-wrap .team-name{font-size:14px}
  .title-wrap .manager{font-size:10px}
  .summary{font-size:11.5px;max-height:64px}
  .pod .medal{font-size:30px}
  .team-logo-icon{width:36px;height:36px}
}

/* ===== Fancy little finishing touches (desktop) ===== */
.slide .content{position:relative;z-index:2}
.reveal-wrap::after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;box-shadow:inset 0 1px 0 rgba(255,255,255,.02)}

/* ===== Locked countdown mode (mobile + desktop) ===== */
/* Applied by JS: add class "locked" to .reveal-wrap while countdown active */
.reveal-wrap.locked .reveal-header,
.reveal-wrap.locked .controls,
.reveal-wrap.locked .slide:not(.countdown) {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* Make the countdown slide fill the available area nicely */
.reveal-wrap.locked .slide.countdown {
  display: flex !important;
  opacity: 1 !important;
  transform: none !important;
  z-index: 30 !important;
  inset: 0 0 0 0 !important;
  padding: 0 !important;
}

/* Mobile: hide left big image and ensure only right-side icon shows (put at end of rankings.css) */
@media (max-width: 880px) {
  /* hide the left large photo entirely on mobile */
  .rank-photo {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
  }

  /* ensure the team-logo-icon is visible and small (avatar) */
  .team-logo-icon {
    display: inline-block !important;
    width: 40px !important;
    height: 40px !important;
    min-width: 40px !important;
    min-height: 40px !important;
    border-radius: 8px !important;
    overflow: hidden !important;
    border: 1px solid rgba(255,255,255,.04) !important;
  }
  .team-logo-icon img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  /* tighten title area so long names ellipsize nicely */
  .title-wrap .team-name { font-size: 15px !important; line-height: 1 !important; }
  .title-wrap .manager { font-size: 11px !important; opacity: .95; }

  /* If there are leftover grid columns from desktop styles, force a single-column flow */
  .rank-card, .content > div[style*="grid-template-columns"] {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    align-items: stretch !important;
  }
}

/* ===== Mobile: compact header + stats layout (fits in two lines) ===== */
@media (max-width:880px) {
  /* Ensure the top area uses a 2-column visual: left = header, right = stats */
  .rank-top { 
    display: flex !important;
    align-items: flex-start !important;
    gap: 8px !important;
    justify-content: space-between !important;
  }

  /* Swap the DOM order so the header block (originally right) appears left */
  .rank-top > div:first-child { order: 2 !important; }  /* meta block becomes right */
  .rank-top > div:last-child  { order: 1 !important; text-align: left !important; } /* header becomes left */

  /* Header (left) styling — single-line headline */
  .rank-top > div:last-child > div:first-child {
    font-size: 14px !important;
    font-weight: 900 !important;
    line-height: 1 !important;
    margin: 0 0 4px 0 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  /* Make the summary label area (left column) compact so summary body below has room */
  .rank-body .projected { display: block !important; font-size: 12px !important; font-weight:700 !important; margin-top:6px !important; }
  /* ensure the "Projected final" element is the second-line stat we want under the one-line stats */

  /* Right column: meta-row becomes the one-line stats row */
  .meta-row { display: flex !important; gap: 8px !important; flex-wrap: nowrap !important; align-items: center !important; overflow: hidden !important; }
  .meta-row .meta {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 11px !important;
    padding: 6px 8px !important;
    min-width: 0 !important;
  }

  /* Hide duplicate/less-important meta items on mobile (Projected and Playoff if present in meta-row) */
  /* These assume the HTML order: Record, PF, PA, Projected, Playoff */
  .meta-row .meta:nth-child(4),
  .meta-row .meta:nth-child(5) {
    display: none !important;
  }

  /* Ensure the projected record element (on left/header block) is visible under the first stats line */
  .rank-top > div:last-child .projected { display: block !important; margin-top: 6px !important; font-size: 12px !important; color: var(--text); }

  /* Reduce sizes to make everything fit onto two lines */
  .title-wrap .team-name { font-size: 15px !important; }
  .title-wrap .manager   { font-size: 11px !important; color: var(--muted) !important; }
  .rank-badge { font-size: 24px !important; padding: 6px 8px !important; }

  /* Summary body: make smaller and allow taller area to avoid clipping */
  .summary {
    font-size: 12px !important;
    line-height: 1.35 !important;
    max-height: 84px !important;
    overflow: auto !important;
    margin-top: 8px !important;
  }

  /* Tighten vote row and controls */
  .vote-row .vote-btn { padding: 6px 8px !important; font-size: 12px !important; }
  .vote-count { font-size: 11px !important; margin-left: 8px !important; }

  /* Safety: prevent the right-side stats from wrapping to a second visual line by allowing them to shrink */
  .rank-top > div:first-child { min-width: 0 !important; flex: 0 1 auto !important; }
  .rank-top > div:last-child  { min-width: 0 !important; flex: 1 1 auto !important; }

  /* If the meta-row still overflows on very narrow screens, reduce font further */
  @media (max-width:420px){
    .meta-row .meta { font-size: 10px !important; padding: 4px 6px !important; }
    .title-wrap .team-name { font-size: 14px !important; }
    .summary { font-size: 11px !important; max-height: 64px !important; }
  }
}

/* ===== Mobile: taller content boxes, shorter page, move controls up ===== */
@media (max-width:880px) {

  /* make the whole reveal a little shorter so content concentrates toward the top */
  .reveal-wrap {
    /* reduce vertical height so page feels shorter and more fits above-the-fold */
    height: calc(100vh - 120px) !important;
    padding-bottom: 8px !important;
  }

  /* Increase the card/body vertical space so summary and stats don't appear cramped */
  .rank-body {
    min-height: 160px !important;    /* taller content area */
    padding: 14px 12px !important;   /* more breathing room */
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
  }

  /* Give the summary more room and make it scrollable if it must overflow */
  .summary {
    font-size: 12px !important;
    line-height: 1.4 !important;
    max-height: 120px !important;    /* more vertical room for summary */
    overflow-y: auto !important;
    padding-right: 6px !important;
    margin-top: 8px !important;
  }

  /* Ensure meta chips (Record/PF/PA) line remains compact and sits toward top-right */
  .meta-row {
    align-items: center !important;
    gap: 8px !important;
    margin-top: 0 !important;
    padding-left: 6px !important;
  }

  /* make the project record clearly on the second line and compact */
  .projected {
    display: block !important;
    font-size: 12px !important;
    margin-top: 6px !important;
    color: var(--muted) !important;
  }

  /* Move the controls to top-right so navigation is visible without scrolling */
  .controls {
    position: absolute !important;
    top: 10px !important;
    right: 10px !important;
    left: auto !important;
    width: auto !important;
    padding: 6px !important;
    gap: 8px !important;
    background: transparent !important;
    border: none !important;
    z-index: 60 !important;
    align-items: center !important;
  }

  /* Make prev/next buttons larger and more tappable */
  .controls .small-btn {
    padding: 10px 12px !important;
    font-size: 14px !important;
    border-radius: 10px !important;
    min-height: 44px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* keep progress bar and slide label but reduce size so they don't dominate top area */
  .progress { display:none !important; } /* hide progress on small mobile to save vertical space */
  #slideLabel { display:block !important; font-size:12px !important; color:var(--muted) !important; margin-left:6px !important; }

  /* ensure podium/pod spacing doesn't push content vertically too much */
  .podium-wrap { gap:8px !important; margin-top:8px !important; justify-content:flex-start !important; }
  .pod { padding:8px !important; width:110px !important; }

  /* keep vote-row compact at bottom of the card */
  .vote-row { margin-top:10px !important; gap:6px !important; justify-content:flex-start !important; }
  .vote-row .small-btn { padding:8px 10px !important; font-size:13px !important; }

  /* safety: prevent reveal content from overflowing entire viewport */
  main#slides { height: calc(100vh - 180px) !important; overflow: hidden !important; }
  .slide { inset: 36px 10px 80px 10px !important; overflow: hidden !important; }

  /* tweak team header sizes slightly to keep layout compact */
  .rank-badge { font-size:22px !important; padding:6px 8px !important; }
  .title-wrap .team-name { font-size:15px !important; }
  .title-wrap .manager { font-size:11px !important; }

  /* very small phones: shrink a touch more */
  @media (max-width:420px){
    .reveal-wrap { height: calc(100vh - 140px) !important; }
    .rank-body { min-height: 140px !important; padding: 10px !important; }
    .summary { max-height: 96px !important; font-size:11px !important; }
    .controls .small-btn { min-height:40px !important; font-size:13px !important; padding:8px 10px !important; }
  }
}

/* ===== Mobile follow-up: controls at bottom, slightly larger logo, break after PA ===== */
@media (max-width:880px) {

  /* Use the safer viewport height var to avoid mobile browser toolbars hiding content.
     If you add the tiny JS below it will set --vh correctly. */
  .reveal-wrap {
    height: calc(var(--vh, 1vh) * 100 - 120px) !important;
  }

  /* Restore controls to bottom of the card (not fixed at top) so they sit above the OS toolbar */
  .controls {
    position: static !important;
    top: auto !important;
    right: auto !important;
    left: auto !important;
    width: 100% !important;
    padding: 8px 6px !important;
    margin-top: 8px !important;
    justify-content: space-between !important;
    background: transparent !important;
    border-top: 1px dashed rgba(255,255,255,.02) !important;
    z-index: 20 !important;
  }

  /* Slightly larger right-side logo (couple px bigger) */
  .team-logo-icon {
    width: 46px !important;
    height: 46px !important;
    min-width: 46px !important;
    min-height: 46px !important;
    border-radius: 8px !important;
  }
  .team-logo-icon img { width:100% !important; height:100% !important; object-fit:cover !important; }

  /* Ensure rank-photo remains hidden on mobile (you added Option A earlier) */
  .rank-photo { display: none !important; }

  /* Meta layout: first three meta chips stay on first line (Record / PF / PA)
     anything after that will break to the next line (projected, playoff, etc.) */
  .meta-row { display:flex !important; gap:8px !important; align-items:center !important; flex-wrap:nowrap !important; }
  .meta-row .meta { font-size:11px !important; padding:6px 8px !important; white-space:nowrap; min-width:0; }
  /* show items 4+ as block on their own new line */
  .meta-row .meta:nth-child(n+4) {
    display:block !important;
    width:100% !important;
    margin-top:6px !important;
    white-space:normal !important;
    text-overflow:clip !important;
  }

  /* Keep the projected element (the clear 'Proj Record:') on the second row as well */
  .rank-top > div:last-child .projected { display:block !important; font-size:12px !important; margin-top:6px !important; }

  /* Slight font nudges so everything fits and summary has vertical space */
  .title-wrap .team-name { font-size:15px !important; }
  .title-wrap .manager { font-size:11px !important; color:var(--muted) !important; }
  .summary { font-size:12px !important; line-height:1.38 !important; max-height:120px !important; overflow:auto !important; }

  /* If the meta-row still appears crowded on very narrow devices, reduce chip font a bit */
  @media (max-width:420px){
    .meta-row .meta { font-size:10px !important; padding:5px 6px !important; }
    .team-logo-icon { width:40px !important; height:40px !important; min-width:40px !important; min-height:40px !important; }
  }
}

/* ==== Larger team logo (override; put near end of file) ==== */
.team-logo-icon {
  width: 80px !important;
  height: 70px !important;
  min-width: 56px !important;
  min-height: 56px !important;
  flex: 0 0 56px !important;
  border-radius: 10px !important;
  overflow: hidden !important;
  border: 1px solid rgba(255,255,255,.04) !important;
  display: inline-block !important;
}

.team-logo-icon img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

/* ==== Absolute center of the slide label (no HTML change needed) ==== */
.controls {
  position: relative; /* ensure positioned ancestor */
}

#slideLabel {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  pointer-events: none;        /* so clicks hit Prev/Next if overlapping */
  color: var(--muted);         /* tweak visual style if needed */
  font-weight: 700;
  font-size: 13px;
}

/* ===== Layout: vertical meta stack on right, room for summary, taller container =====
   Paste this near the end of rankings.css (after existing rules) ===== */

/* Make the whole reveal a little taller on desktop/tablet so content breathes */
.reveal-wrap {
  height: calc(100vh - 20px) !important; /* a bit taller than before */
  min-height: 720px !important;          /* forces taller minimum */
}

/* Ensure rank-body can anchor an absolutely positioned meta column */
.rank-body {
  position: relative;               /* anchor for the meta column */
  padding-right: 160px !important;  /* reserve space on right for stacked meta chips */
  transition: padding .18s ease;
  min-height: 380px !important;     /* make the card taller */
}

/* Vertical meta column: stack chips down the right side */
.rank-body .meta-row {
  position: absolute !important;
  right: 16px !important;           /* distance from right edge of card */
  top: 56px !important;             /* vertical offset — tweak if header height changes */
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  align-items: flex-end !important; /* chips align to right for neat column */
  width: 120px !important;          /* fixed column width to control wrapping */
  max-width: 120px !important;
  box-sizing: border-box !important;
  margin-top: 0 !important;         /* remove earlier margin */
  transform: translateZ(0);
}

/* Make each meta chip full-width inside the right column and smaller */
.rank-body .meta-row .meta {
  display: block !important;
  width: 100% !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  font-size: 11px !important;
  padding: 6px 8px !important;
  border-radius: 8px !important;
  text-align: right !important;     /* right-align the chip contents inside the column */
  box-sizing: border-box !important;
}

/* Move the summary text inward (avoid collision with meta column) */
.rank-body .summary {
  margin-right: 140px !important;   /* leaves room for the stacked meta column */
  transition: margin .18s ease;
}

/* Also nudge the vote-row to avoid running under the meta column */
.rank-body .vote-row { 
  margin-right: 140px !important;
}

/* Make podium / top content unaffected visually (if present) */
.podium-wrap { z-index: 2; }

/* Mobile / small screens: revert to previous inline layout so nothing overlaps */
@media (max-width: 880px) {
  .rank-body {
    padding-right: 12px !important;
    min-height: 0 !important;
  }
  .rank-body .meta-row {
    position: static !important;
    width: auto !important;
    max-width: none !important;
    flex-direction: row !important;
    gap: 8px !important;
    align-items: center !important;
    justify-content: flex-start !important;
    margin-top: 8px !important;
  }
  .rank-body .meta-row .meta {
    text-align: left !important;
    font-size: 11px !important;
    padding: 6px 8px !important;
    min-width: 0 !important;
  }
  .rank-body .summary { margin-right: 0 !important; max-height: 120px !important; }
  .rank-body .vote-row { margin-right: 0 !important; }
  /* revert container height for small devices so it doesn't blow past the viewport */
  .reveal-wrap { height: calc(var(--vh,1vh) * 100 - 120px) !important; min-height: 0 !important; }
}

/* Tiny tweak for very narrow phones */
@media (max-width: 420px) {
  .rank-body .meta-row .meta { font-size: 10px !important; padding: 4px 6px !important; }
  .reveal-wrap { min-height: 0 !important; }
}

/* ===== MOBILE CARD STACK (TALLER & CLEANER) ===== */
@media (max-width:880px) {

  .rank-body {
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    padding: 16px 14px !important;
    border-radius: 12px !important;
    background: linear-gradient(180deg,var(--panel),var(--panel-2));
    min-height: 340px !important;  /* taller container */
  }

  .rank-header-mini {
    text-align: center;
    margin-bottom: 8px;
  }
  .rank-header-mini h3.rank-subtitle {
    font-size: 15px;
    font-weight: 900;
    color: var(--accent-2);
    margin-bottom: 4px;
  }
  .rank-header-mini .projected {
    font-size: 12px;
    font-weight: 700;
    color: var(--muted);
  }

  .meta-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
    margin: 12px 0;
  }
  .meta-grid .meta {
    background: rgba(255,255,255,.04);
    border-radius: 8px;
    padding: 6px 8px;
    font-size: 11.5px;
    font-weight: 800;
    text-align: center;
  }

  .summary {
    flex: 1;
    margin-top: 8px;
    font-size: 12px;
    line-height: 1.4;
    overflow-y: auto;
    max-height: 140px; /* allows scroll if long */
  }
}

/* === MOBILE: lift cards higher, avoid clipping, controls above Safari toolbar === */
@media (max-width: 880px) {

  /* make the outer container use the safe viewport */
  .reveal-wrap {
    height: calc(var(--vh, 1vh) * 100) !important;
    min-height: 100vh !important;
    padding: 0 8px 0 8px !important; /* remove top padding that caused gap */
    margin: 0 !important;
  }

  /* Slide: remove top gap so cards start near top; keep bottom padding so controls don't overlap content */
  .slide {
    inset: -60px 0 0 0 !important;
    margin: 0 !important;
    padding: 0 8px 110px 8px !important; /* 0 top padding => cards start higher; big bottom pad keeps controls clear */
    overflow-y: auto !important;
    height: auto !important;
    min-height: calc(var(--vh, 1vh) * 100 - 30px) !important; /* keep enough room for controls */
  }

  /* tiny top cushion for content so text doesn't touch the border */
  .slide .content {
    padding-top: 6px !important;
  }

  /* flexible card body, no inner clipping */
  .rank-body {
    min-height: unset !important;
    height: auto !important;
    overflow: visible !important;
    padding: 12px 12px 18px !important;
    border: 1px solid rgba(255,255,255,.06) !important;
  }

  /* summary: allow natural flow */
  .summary {
    max-height: none !important;
    overflow: visible !important;
    margin-top: 8px !important;
  }

  /* keep vote buttons visible and not clipped by controls */
  .vote-row {
    position: relative !important;
    bottom: auto !important;
    padding-bottom: 12px !important;
    margin-top: 10px !important;
  }

  /* small bump to image so top edge never clips */
  .rank-photo img,
  .team-logo-icon img {
    margin-top: 2px !important;
  }

  /* Controls: fixed and raised above the bottom OS toolbar */
  .controls {
    position: fixed !important;
    bottom: 0px !important;  /* default: sits above iOS toolbar */
    left: 8px !important;
    right: 8px !important;
    width: calc(100% - 16px) !important;
    padding: 8px 10px !important;
    justify-content: space-between !important;
    background: rgba(0,0,0,0.28) !important;
    backdrop-filter: blur(6px) !important;
    border-top: 1px solid rgba(255,255,255,0.05) !important;
    border-radius: 12px !important;
    z-index: 999 !important;
    box-shadow: 0 6px 20px rgba(0,0,0,0.35) !important;
  }

  .controls .small-btn {
    padding: 10px 12px !important;
    font-size: 14px !important;
    border-radius: 10px !important;
    min-height: 42px !important;
  }

  /* hide the progress bar on small mobile to save vertical space */
  .progress { display: none !important; }

  /* Slide label: sit just above controls */
  #slideLabel {
    position: fixed !important;
    bottom: calc(78px + 42px) !important; /* controls bottom + approx height */
    left: 50% !important;
    transform: translateX(-50%) !important;
    font-size: 12px !important;
    color: var(--muted) !important;
    z-index: 1000 !important;
    background: rgba(0,0,0,0.18) !important;
    padding: 4px 8px !important;
    border-radius: 8px !important;
  }
}

/* === Rank-based text color theme (no podium blocks) === */
.slide[data-index="1"] {
  --accent: #ffd966 !important;   /* gold */
  --accent-2: #f5c000 !important;
}

.slide[data-index="2"] {
  --accent: #c0cbd8 !important;   /* silver */
  --accent-2: #9fb0c8 !important;
}

.slide[data-index="3"] {
  --accent: #d1b9a6 !important;   /* bronze */
  --accent-2: #b38a6f !important;
}

/* apply those accent colors to the key text areas */
.slide[data-index="1"] .team-name,
.slide[data-index="2"] .team-name,
.slide[data-index="3"] .team-name {
  color: var(--accent-2) !important;
}

.slide[data-index="1"] .rank-badge,
.slide[data-index="2"] .rank-badge,
.slide[data-index="3"] .rank-badge {
  color: var(--accent-2) !important;
}

.slide[data-index="1"] .meta,
.slide[data-index="2"] .meta,
.slide[data-index="3"] .meta {
  border-color: var(--accent) !important;
  color: var(--accent-2) !important;
}

/* === Make Final / Total page more compact === */
.slide.final .content,
.slide[data-index="total"] .content {
  transform: scale(0.9);          /* slight zoom-out */
  transform-origin: top center;   /* anchor from top */
}

.slide.final,
.slide[data-index="total"] {
  font-size: 0.9rem !important;   /* shrink all text a bit */
}

.slide.final table,
.slide[data-index="total"] table {
  font-size: 11px !important;     /* smaller table text */
}

.slide.final h2,
.slide[data-index="total"] h2 {
  font-size: 14px !important;
  margin-bottom: 4px !important;
}

.slide.final p,
.slide[data-index="total"] p {
  font-size: 12px !important;
  margin-bottom: 6px !important;
}

.slide.final button,
.slide[data-index="total"] button {
  transform: scale(0.9);
  font-size: 12px !important;
  padding: 6px 10px !important;
}
